# EKS 실제 구성 - 간단 버전 (PPT용)

## 🏗️ 실제 하이브리드 노드 구성

```
                           ┌─── 외부 사용자 ───┐
                                    │
                           ┌────────▼────────┐
                           │ Application     │
                           │ Load Balancer   │
                           │     (ALB)       │
                           └────────┬────────┘
                                    │
        ┌───────────────────────────┼───────────────────────────┐
        │              EKS Cluster │                           │
        │  ┌─────────────────────────▼─────────────────────────┐ │
        │  │               Private Subnets                    │ │
        │  │                                                  │ │
        │  │  ┌─── AZ-2a ───┐      ┌─── AZ-2b ───┐           │ │
        │  │  │             │      │             │           │ │
        │  │  │ 🔧 NodeGroup │      │ 🔧 NodeGroup│           │ │
        │  │  │ (관리형)     │      │ (관리형)    │           │ │
        │  │  │ ┌─────────┐ │      │ ┌─────────┐ │           │ │
        │  │  │ │시스템    │ │      │ │시스템    │ │           │ │
        │  │  │ │파드들   │ │      │ │파드들   │ │           │ │
        │  │  │ │•Karpenter│ │      │ │•ArgoCD  │ │           │ │
        │  │  │ │•Prometheus│ │      │ │•Grafana │ │           │ │
        │  │  │ └─────────┘ │      │ └─────────┘ │           │ │
        │  │  │             │      │             │           │ │
        │  │  │ ⚡ Karpenter │      │ ⚡ Karpenter │           │ │
        │  │  │ (동적)      │      │ (필요시)    │           │ │
        │  │  │ ┌─────────┐ │      │ ┌─────────┐ │           │ │
        │  │  │ │서비스    │ │      │ │서비스    │ │           │ │
        │  │  │ │파드들   │ │      │ │파드들   │ │           │ │
        │  │  │ │•API     │ │      │ │•API     │ │           │ │
        │  │  │ │•Gateway │ │      │ │•Gateway │ │           │ │
        │  │  │ │•Pay     │ │      │ │•Pay     │ │           │ │
        │  │  │ └─────────┘ │      │ └─────────┘ │           │ │
        │  │  └─────────────┘      └─────────────┘           │ │
        │  └──────────────────────────────────────────────────┘ │
        └─────────────────────────────────────────────────────────┘
                                    │
                    ┌───────────────┼───────────────┐
                    │               │               │
            ┌───────▼──────┐ ┌──────▼──────┐ ┌─────▼─────┐
            │     RDS      │ │ElastiCache  │ │Amazon MQ  │
            │ PostgreSQL   │ │   Redis     │ │ RabbitMQ  │
            └──────────────┘ └─────────────┘ └───────────┘
```

---

## 📊 노드 타입별 역할 분담

### 🔧 **NodeGroup (관리형 노드)**
```
┌─────────── NodeGroup ──────────┐
│                               │
│ 🎯 목적: 안정적인 시스템 운영    │
│                               │
│ 📍 위치: 고정 (항상 실행)       │
│                               │
│ 🏃 실행 파드:                  │
│ • Karpenter (노드 관리)        │
│ • ArgoCD (GitOps 배포)        │
│ • Prometheus (메트릭 수집)     │
│ • Grafana (모니터링)          │
│ • AWS Load Balancer Controller│
│ • CoreDNS, kube-proxy         │
│                               │
│ 💰 비용: 고정 (24/7)           │
│ 🔄 스케일링: 수동 관리          │
└───────────────────────────────┘
```

### ⚡ **Karpenter Nodes (동적 노드)**
```
┌─────────── Karpenter ──────────┐
│                               │
│ 🎯 목적: 서비스 워크로드 처리   │
│                               │
│ 📍 위치: 동적 (필요시 생성)     │
│                               │
│ 🏃 실행 파드:                  │
│ • flash-api (백엔드 API)      │
│ • flash-gateway (게이트웨이)   │
│ • flash-pay (결제 처리)       │
│                               │
│ 💰 비용: 변동 (사용량 기반)    │
│ 🔄 스케일링: 자동 (HPA/VPA)    │
└───────────────────────────────┘
```

---

## 🔄 스케일링 시나리오

### 📈 **평상시 (7개 파드)**
```
NodeGroup:  [시스템 파드들] (2개 노드)
Karpenter:  [서비스 파드 7개] (1개 노드)
총 노드:    3개
```

### 🚀 **트래픽 급증시 (18개 파드)**
```
NodeGroup:  [시스템 파드들] (2개 노드) 
Karpenter:  [서비스 파드 18개] (3-4개 노드)
총 노드:    5-6개
```

### 💡 **이점**
- **안정성**: 시스템 파드는 항상 안정적인 노드에서 실행
- **비용 효율성**: 서비스 파드만 동적 스케일링
- **성능**: Spot 인스턴스로 60% 비용 절감
- **가용성**: Multi-AZ 분산으로 장애 대응

---

## 🎯 PPT 발표 포인트

### 1. **하이브리드 구성의 장점**
```
"저희는 안정성과 비용 효율성을 모두 확보하기 위해 
하이브리드 노드 구성을 선택했습니다."
```

### 2. **명확한 역할 분담**
```
"시스템 파드는 안정적인 NodeGroup에서,
서비스 파드는 비용 효율적인 Karpenter에서 실행됩니다."
```

### 3. **실제 효과**
```
"이를 통해 시스템 안정성은 유지하면서도
서비스 운영 비용을 60% 절감할 수 있었습니다."
```