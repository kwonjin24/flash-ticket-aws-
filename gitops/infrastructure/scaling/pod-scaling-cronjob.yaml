# íŒŒë“œ ìŠ¤ì¼€ì¼ì—… CronJob (ì˜¤í›„ 4:50)
apiVersion: batch/v1
kind: CronJob
metadata:
  name: pod-scale-up
  namespace: flash-ticket
spec:
  schedule: "10 17 * * *"  # ë§¤ì¼ ì˜¤í›„ 5:10 (NodePool ìƒì„± 2ë¶„ í›„)
  concurrencyPolicy: Forbid
  jobTemplate:
    spec:
      template:
        spec:
          serviceAccountName: scaling-operator
          containers:
          - name: kubectl
            image: bitnami/kubectl:latest
            command:
            - /bin/sh
            - -c
            - |
              echo "ğŸš€ íŒŒë“œ ìŠ¤ì¼€ì¼ì—… ì‹œì‘..."
              
              # í˜„ì¬ ìƒíƒœ í™•ì¸
              echo "=== ìŠ¤ì¼€ì¼ì—… ì „ ìƒíƒœ ==="
              kubectl get deployments -n flash-ticket
              
              # ìŠ¤ì¼€ì¼ì—… ì‹¤í–‰
              echo "=== ìŠ¤ì¼€ì¼ì—… ì‹¤í–‰ ==="
              kubectl scale deployment flash-api --replicas=8 -n flash-ticket
              kubectl scale deployment flash-gateway --replicas=8 -n flash-ticket  
              kubectl scale deployment flash-pay --replicas=8 -n flash-ticket
              
              # ê²°ê³¼ í™•ì¸
              echo "=== ìŠ¤ì¼€ì¼ì—… í›„ ìƒíƒœ ==="
              kubectl get deployments -n flash-ticket
              kubectl get pods -n flash-ticket | grep -E "(flash-api|flash-gateway|flash-pay)"
              
              echo "âœ… íŒŒë“œ ìŠ¤ì¼€ì¼ì—… ì™„ë£Œ!"
          restartPolicy: OnFailure
---
# íŒŒë“œ ìŠ¤ì¼€ì¼ë‹¤ìš´ CronJob (ì˜¤í›„ 5:30)
apiVersion: batch/v1
kind: CronJob
metadata:
  name: pod-scale-down
  namespace: flash-ticket
spec:
  schedule: "12 17 * * *"  # ë§¤ì¼ ì˜¤í›„ 5:12 (2ë¶„ í›„ ìŠ¤ì¼€ì¼ë‹¤ìš´)
  concurrencyPolicy: Forbid
  jobTemplate:
    spec:
      template:
        spec:
          serviceAccountName: scaling-operator
          containers:
          - name: kubectl
            image: bitnami/kubectl:latest
            command:
            - /bin/sh
            - -c
            - |
              echo "ğŸ“‰ íŒŒë“œ ìŠ¤ì¼€ì¼ë‹¤ìš´ ì‹œì‘..."
              
              # í˜„ì¬ ìƒíƒœ í™•ì¸
              echo "=== ìŠ¤ì¼€ì¼ë‹¤ìš´ ì „ ìƒíƒœ ==="
              kubectl get deployments -n flash-ticket
              
              # ìŠ¤ì¼€ì¼ë‹¤ìš´ ì‹¤í–‰
              echo "=== ìŠ¤ì¼€ì¼ë‹¤ìš´ ì‹¤í–‰ ==="
              kubectl scale deployment flash-api --replicas=2 -n flash-ticket
              kubectl scale deployment flash-gateway --replicas=2 -n flash-ticket
              kubectl scale deployment flash-pay --replicas=2 -n flash-ticket
              
              # ê²°ê³¼ í™•ì¸
              echo "=== ìŠ¤ì¼€ì¼ë‹¤ìš´ í›„ ìƒíƒœ ==="
              kubectl get deployments -n flash-ticket
              
              echo "âœ… íŒŒë“œ ìŠ¤ì¼€ì¼ë‹¤ìš´ ì™„ë£Œ!"
          restartPolicy: OnFailure